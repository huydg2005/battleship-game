<div class="waitroom-container">

  <!-- Header Box -->
  <div class="room-header">
    <h2>Phòng: {{ roomId }}</h2>
    <button class="copy-btn" (click)="copyRoomCode()">📋 Sao chép mã phòng</button>
  </div>

  <!-- Main content -->
  <div class="main-content">
    <!-- Danh sách người chơi -->
    <div class="players-section">
      <h3>Người chơi ({{ readyCount }}/{{ playersCount }})</h3>
      <ul>
        <li *ngFor="let p of players" [class.ready]="p.ready">
          <span>
            {{ p.name }}
            <span *ngIf="p.isHost" class="host-badge">Chủ phòng</span>
          </span>
          <span *ngIf="p.ready" class="status ready">✔ Sẵn sàng</span>
          <span *ngIf="!p.ready" class="status not-ready">⏳ Chưa sẵn sàng</span>
        </li>
      </ul>

      <div class="player-actions">
        <button *ngIf="!isCurrentPlayerReady()" (click)="setReady(true)" class="ready-btn">✅ Sẵn sàng</button>
        <button *ngIf="isCurrentPlayerReady()" (click)="setReady(false)" class="cancel-btn">❌ Hủy sẵn sàng</button>
        <button *ngIf="isHost" (click)="startGame()" [disabled]="startDisabled" class="start-btn">🚀 Bắt đầu</button>
      </div>
    </div>

    <!-- Chat box -->
    <div class="chat-section">
      <h3>💬 Trò chuyện</h3>
      <div class="chat-box">
        <div *ngFor="let msg of chatMessages" class="chat-message">
          <span class="chat-name">{{ msg.name }}:</span>
          <span class="chat-text">{{ msg.message }}</span>
          <span class="chat-time">{{ msg.time }}</span>
        </div>
      </div>
      <div class="chat-input">
        <input type="text" placeholder="Nhập tin nhắn..." [(ngModel)]="chatInput" (keypress)="handleChatEnter($event)">
        <button (click)="sendMessage()" class="send-btn">📤</button>
      </div>
    </div>
  </div>

</div>
